# Dynamic Application Security Testing (DAST)

DAST involves scanning a live webapp to detect common vulnerabilities and weaknesses. It works by interacting with the application to gather information and simulate attacks.

- **Scanner behavior**: an active scanner sends crafted payloads to test exploits, while a passive one only collects information (e.g., missing security headers in responses).

- **Scanner approach**: a blind scanner has to explore the application first (e.g., run a [spider](https://en.wikipedia.org/wiki/Web_crawler) to understand the sitemap), while an informed one uses knowldge of the available endpoints (e.g., given an OpenAPI [specification JSON](https://learn.openapis.org/examples/v3.0/api-with-examples.html)).

## Practice

[ZAP](https://www.zaproxy.org/) is an open-source DAST tool, it provides a desktop interface for manual exploration, and a set of packaged scan scripts that can run in docker.

1. Run a deliberately insecure Python web app (accessible on port 5000)

    ```bash
    docker run --rm -d --name app -p127.0.0.1:5000:5000 --network lab_net sh3b0/tiwap:latest
    ```

1. Run a [ZAP baseline scan](https://www.zaproxy.org/docs/docker/baseline-scan/) in docker against the application.

    ```bash
    docker run -v $HOST_WORKDIR:/zap/wrk/:rw -it --rm --network lab_net ghcr.io/zaproxy/zaproxy:stable \
        zap-baseline.py -t http://app:5000 -w report.md
    ```

1. Inspect the generated Markdown report. Note that the unauthenticated scan won't reveal interesting findings.

## Task 1

1. Manually exploit two vulnerabilities in the app.
1. Suggest practical remediation steps for the two vulnerabilities.

## Task 2

Configure ZAP for an authenticated scan against the application. General steps:

1. Download ZAP GUI (requires Java) and a supported browser.
1. Create a new session. Start an active scan to verify everything works.
1. Use the authentication tester to create a context. Configure it for automatic login with `admin:admin`.
1. Launch a spider within the context to discover endpoints
1. Start an active scan given the knowledge of application routes.
1. Generate and include a "Traditional HTML report", listing scan results with alerts found.

## Task 3

1. Perform another authenticated scan with [StackHawk](https://hub.docker.com/r/stackhawk/hawkscan/) against the application.
1. Generate and include the scanning report in PDF.
1. Compare the results of ZAP vs. StackHawk (e.g., findings count, severity, scan speed, ease of use) and recommend use cases for each tool.
